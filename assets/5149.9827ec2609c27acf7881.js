"use strict";(self.webpackChunk_basthon_basthon_notebook=self.webpackChunk_basthon_basthon_notebook||[]).push([[5149],{87867:(t,e,n)=>{n.d(e,{H:()=>a});var o=n(72467);const s="filesystem:/";!function(){var t;const e=async t=>await new Promise(((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=n,o.readAsDataURL(new Blob([t]))}));window._fetch=null!==(t=window._fetch)&&void 0!==t?t:window.fetch,window.fetch=async function(t,n){var o;const r=null!==(o=t.url)&&void 0!==o?o:t.toString(),i=s;if(r.startsWith(i)){const t=r.slice(12);let n=null;const o={status:200,statusText:"OK",headers:new Headers};try{n=window.Basthon.getFile(t);const s=await e(n),r=s.substring(s.indexOf(":")+1,s.indexOf(";"));n=n.buffer,o.headers.append("Content-Type",r),o.headers.append("Content-Length",n.byteLength)}catch(t){o.status=404,o.statusText="Not Found"}return new Response(n,o)}return await window._fetch(t,n)};const n=Object.getOwnPropertyDescriptor(HTMLImageElement.prototype,"src");Object.defineProperty(HTMLImageElement.prototype,"src",{...n,get:function(){var t;return null===(t=null==n?void 0:n.get)||void 0===t?void 0:t.call(this)},set:function(t){var o;const r=s;if(t.startsWith(r)){const o=t.slice(12),s=window.Basthon.getFile(o).buffer;(async()=>{var t;null===(t=null==n?void 0:n.set)||void 0===t||t.call(this,await e(s))})()}else null===(o=null==n?void 0:n.set)||void 0===o||o.call(this,t)}})}();class r extends Error{constructor(t){super(`Function ${t} not implemented!`),this.name="NotImplementedError"}}class i extends Event{constructor(t,e){super(t),this.detail=e}}class a{constructor(t){this._ready=!1,this._loaded=new o.I,this._execution_count=0,this._pendingInput=!1,this._listeners=new Map,this._rootPath=t.rootPath}version(){return"0.62.21"}language(){throw new r("language")}languageName(){throw new r("languageName")}moduleExts(){throw new r("moduleExts")}async launch(){throw new r("launch")}get execution_count(){return this._execution_count}evalAsync(t,e,n,o=null){throw new r("evalAsync")}restart(){throw new r("restart")}async putFile(t,e){throw new r("putFile")}async putModule(t,e){throw new r("putModule")}userModules(){return[]}getFile(t){throw new r("getFile")}getUserModuleFile(t){throw new r("getUserModuleFile")}more(t){throw new r("more")}complete(t){return[]}banner(){return`Welcome to the ${this.languageName()} REPL!`}ps1(){return">>> "}ps2(){return"... "}async init(){try{await this.launch()}catch(t){return void this._loaded.reject(t)}this.addEventListener("eval.request",this.evalFromEvent.bind(this)),this._ready=!0,this._loaded.resolve()}get ready(){return this._ready}async loaded(){await this._loaded.promise}basthonRoot(t=!1){let e=this._rootPath+"/"+this.version()+"/"+this.language();if(t&&!e.startsWith("http")){const t=window.location.origin+window.location.pathname;e=t.substring(0,t.lastIndexOf("/"))+"/"+e}return e}download(t,e){if(!("string"==typeof t||t instanceof String)){const e=new Blob([t],{type:"application/octet-stream"});t=window.URL.createObjectURL(e)}const n=document.createElement("a");n.download=e,n.href=t,n.target="_blank",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}static loadScript(t){return new Promise((function(e,n){let o=document.createElement("script");o.onload=e,o.onerror=n,o.src=t,document.head.appendChild(o)}))}dispatchEvent(t,e){document.dispatchEvent(new i(`basthon.${t}`,e))}addEventListener(t,e){const n=t=>e(t.detail);document.addEventListener(`basthon.${t}`,n);let o=this._listeners.get(t);null==o&&(o=new Map,this._listeners.set(t,o)),o.set(e,n)}removeEventListener(t,e){const n=this._listeners.get(t);document.removeEventListener(`basthon.${t}`,null==n?void 0:n.get(e))}async inputAsync(t,e=!1,n=void 0){(n=this.clone(n)).content={prompt:t,password:e};const o=new Promise((function(t,e){n.resolve=t,n.reject=e}));this._pendingInput=!0,this.dispatchEvent("eval.input",n);const s=await o;return this._pendingInput=!1,s}clone(t){return JSON.parse(JSON.stringify(t))}async putRessource(t,e){var n;const o=null!==(n=t.split(".").pop())&&void 0!==n?n:"";return this.moduleExts().includes(o)?await this.putModule(t,e):await this.putFile(t,e)}pendingInput(){return this._pendingInput}async evalFromEvent(t){const e=e=>n=>{let o=this.clone(t);o.stream=e,o.content=n,this.dispatchEvent("eval.output",o)},n=e("stdout"),o=e("stderr");let s;try{s=await this.evalAsync(t.code,n,o,t)}catch(e){o(e.toString());const n=this.clone(t);return n.error=e,n.execution_count=this.execution_count,void this.dispatchEvent("eval.error",n)}if(null==s)return;const r=s[0],i=s[1];let a=this.clone(t);a.execution_count=i,null!=r&&(a.result=r),this.dispatchEvent("eval.finished",a)}}},5149:(t,e,n)=>{n.d(e,{KernelPython3:()=>s});var o=n(87867);class s extends o.H{constructor(t){var e;super(t),this._pyodideURLs=["https://cdn.jsdelivr.net/pyodide/v{PYODIDE_VERSION}/full/pyodide.js"],this.__kernel__=null,this.pythonVersion="",this._pyodideURLs.unshift(`${this.basthonRoot()}/pyodide/pyodide.js`),this._pyodideURLs=null!==(e=null==t?void 0:t.pyodideURLs)&&void 0!==e?e:this._pyodideURLs}basthonModulesRoot(t=!1){return this.basthonRoot(t)+"/modules"}language(){return"python3"}languageName(){return"Python 3"}moduleExts(){return["py"]}async _onload(){const t=window.pyodide,e=t._api.repodata_packages;for(let t of Object.keys(e)){const n=e[t];n.file_name=n.file_name.replace("{basthonRoot}",this.basthonRoot(!0))}this.pythonVersion=t.runPython("import platform ; platform.python_version()"),await t.loadPackage("basthon"),this.__kernel__=t.pyimport("basthon").__kernel__}async launch(){let t=this._pyodideURLs[0];for(let e of this._pyodideURLs){e=e.replace("{PYODIDE_VERSION}","0.23.2");try{if((await fetch(e,{method:"HEAD"})).ok){t=e;break}}catch(t){}}try{await s.loadScript(t)}catch(t){throw console.log(t),console.error("Can't load pyodide.js"),t}if(null==window.loadPyodide)throw console.log("window.loadPyodide is null!"),new Error("Can't load pyodide.js");try{window.pyodide=await window.loadPyodide({lockFileURL:this.basthonRoot()+"/repodata.json"})}catch(t){throw console.log(t),console.error("Can't load Python from Pyodide"),t}await this._onload()}get execution_count(){return this.__kernel__.execution_count()}async evalAsync(t,e,n,o=null){void 0===e&&(e=function(t){console.log(t)}),void 0===n&&(n=function(t){console.error(t)});const s=await this.__kernel__.eval(t,e,n,o);if(!(s instanceof window.pyodide.ffi.PyProxy))throw s;const r=s.toJs({create_proxies:!1,dict_converter:Object.fromEntries});return s.destroy(),r}restart(){return this.__kernel__.restart()}async putFile(t,e){this.__kernel__.put_file(t,e)}async putModule(t,e){return await this.__kernel__.put_module(t,e)}userModules(){const t=this.__kernel__.user_modules();if(!(t instanceof window.pyodide.ffi.PyProxy))return t;const e=t.toJs();return t.destroy(),e}getFile(t){return this.__kernel__.get_file(t).toJs()}getUserModuleFile(t){return this.__kernel__.get_user_module_file(t).toJs()}more(t){return this.__kernel__.more(t)}banner(){return'Python 3.11.2 (main, May  3 2023 04:00:05) on WebAssembly/Emscripten\nType "help", "copyright", "credits" or "license" for more information.'}complete(t){const e=this.__kernel__.complete(t);if(!(e instanceof window.pyodide.ffi.PyProxy))return e;const n=e.toJs();return e.destroy(),n}chdir(t){window.pyodide._module.FS.chdir(t)}mkdir(t){window.pyodide._module.FS.mkdir(t)}}}}]);
//# sourceMappingURL=5149.9827ec2609c27acf7881.js.map